"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[757],{1105:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var o=n(7294),a=n(1082),l=n(5414),r=n(3462),i=n(9357),s=n(9688),c=n(2884),m=n(2932),g=n(4395),u=n(8177),d=n(5666),p=n.n(d),b=n(9306),_=n(2434),f=n(6633);var h=n(8547),E=n(2151),k=n(9549),w=n(8120);var v=e=>{var t,n;let{loginForm:l,resetPasswordLink:r,beforeButtonsText:i,afterButtonsText:s,facebookButton:c,googleButton:m,createAccountLink:g,validateErrors:d}=e;const{0:v,1:T}=(0,o.useState)(!1);let y=(0,o.useContext)(w.T);const{register:S,formState:{errors:B,isSubmitSuccessful:L},handleSubmit:x,reset:P,getValues:N}=(0,u.cI)({mode:"onBlur"});return o.createElement("div",{className:"intro-login__content intro-login-content"},o.createElement("div",{className:"intro-login-content__inner"},o.createElement("div",{className:"intro-login__title-wrapper title-wrapper"},o.createElement("h1",{className:"intro-login__title title title--big"},l.title)),o.createElement(b.Z,{beforeButtonsText:i,facebookButton:c,afterButtonsText:s,googleButton:m}),o.createElement("form",{className:"intro-login__form",onSubmit:x(((e,t)=>{var n,o;p().start(),(n=N("email"),o=N("password"),f({method:"post",url:"https://api.tehnotable.com/wp-json/tehnotable/v1/login",data:{email:n,password:o}})).then((e=>{let{data:t}=e;(0,_.P)(t).then((e=>{let{data:t}=e;(0,E.d)("user_id",t.id,{secure:!0,"max-age":3600}),(0,E.d)("user_info",JSON.stringify(t),{secure:!0,"max-age":3600}),(0,k.k)("cart_count"),(0,a.navigate)(y+"account")})).then((()=>T(!0))).then((()=>p().done())).catch((()=>{(0,h.K)(),P(),p().done()}))})).catch((()=>{(0,h.K)(),P(),p().done()}))}),((e,t)=>{console.error(e)}))},o.createElement("div",{className:"intro-login__inp-wrapper"},o.createElement("label",{className:"intro-login__label local-title local-title--black",htmlFor:"login-email"},l.inputEmailLabel),o.createElement("div",{className:"intro-login__inp-inner"},o.createElement("input",Object.assign({className:"intro-login__inp",id:"login-email",type:"text",autoComplete:"off"},S("email",{required:d.errEmptyEmail,pattern:{value:/\S+@\S+\.\S+/,message:d.errInvalidEmail}}))),(null==B?void 0:B.email)&&o.createElement("span",{className:"intro-login__error form-error"},null==B||null===(t=B.email)||void 0===t?void 0:t.message))),o.createElement("div",{className:"intro-login__inp-wrapper"},o.createElement("label",{className:"intro-login__label local-title local-title--black",htmlFor:"login-password"},l.inputPasswordLabel),o.createElement("div",{className:"intro-login__inp-inner"},o.createElement("input",Object.assign({className:"intro-login__inp",id:"login-password",type:"password",autoComplete:"off"},S("password",{required:d.errEmptyPassword,minLength:{value:5,message:d.errShortPassword}}))),(null==B?void 0:B.password)&&o.createElement("span",{className:"intro-login__error form-error"},null==B||null===(n=B.password)||void 0===n?void 0:n.message))),o.createElement("div",{className:"intro-login__btn-wrapper"},o.createElement("button",{className:"intro-login__btn form-btn "+(L||v?"disabled":""),type:"submit",disabled:L||v},o.createElement("span",null,l.button),o.createElement("span",null,l.button)))),o.createElement("div",{className:"intro-login__links intro-login__links--login"},o.createElement(a.Link,{className:"intro-login__link intro-login__link--login",to:y+"recovery"},r.title),o.createElement(a.Link,{className:"intro-login__link intro-login__link--login",to:y+"registration"},g.title))))},T=n(1918);var y=e=>{let{backgroundImage:t,loginForm:n,resetPasswordLink:a,beforeButtonsText:l,afterButtonsText:r,facebookButton:i,googleButton:s,createAccountLink:u,validateErrors:d}=e,{0:p,1:b}=(0,o.useState)(!1);return(0,o.useEffect)((()=>{if(!(0,T.k)())return null;c.ZP.registerPlugin(m.Z);let e=c.ZP.timeline();m.Z.matchMedia({"(min-width: 992px)":()=>{b(!1),e.from(".intro-login__title",.5,{y:"100%",delay:1,onComplete(){e.set(this.targets(),{clearProps:"all"})}}).from(".intro-login__social",.5,{y:60,opacity:0,onComplete(){e.set(this.targets(),{clearProps:"all"})}},"-=.2").from(".intro-login__form",.5,{y:60,opacity:0,onComplete(){e.set(this.targets(),{clearProps:"all"})}},"-=.3").from(".intro-login__links--login",.5,{y:60,opacity:0,onComplete(){e.set(this.targets(),{clearProps:"all"})}},"-=.3")},"(max-width: 991px)":()=>{b(!0),e.from(".intro-login__title",.5,{y:"100%",delay:.2,onComplete(){e.set(this.targets(),{clearProps:"all"})}}).from(".intro-login__social",.5,{y:60,opacity:0,onComplete(){e.set(this.targets(),{clearProps:"all"})}},"-=.2").from(".intro-login__form",.5,{y:60,opacity:0,onComplete(){e.set(this.targets(),{clearProps:"all"})}},"-=.3").from(".intro-login__links--login",.5,{y:60,opacity:0,onComplete(){e.set(this.targets(),{clearProps:"all"})}},"-=.3")}})}),[]),o.createElement("section",{className:"intro intro-login"},!p&&o.createElement(g.Z,{title:n.title,bgImg:t}),o.createElement(v,{loginForm:n,resetPasswordLink:a,beforeButtonsText:l,afterButtonsText:r,facebookButton:i,googleButton:s,createAccountLink:u,validateErrors:d}))},S=n(8995),B=n(5434),L=n(3885),x=n(6851),P=n(7990),N=n(8499);var F=e=>{let{pageContext:t,data:n}=e;if((0,o.useEffect)((()=>{(0,N.e)("user_id")&&(0,a.navigate)(t.prefix+"account")}),[]),(0,N.e)("user_id"))return null;const{title:c,metaDesc:m,breadcrumbs:g}=n.wpPage.seo,u=n.wpTehnotableThemeSetting.mainMenuFields,d=n.wpTehnotableThemeSetting.siteHeaderFields,p=n.wpTehnotableThemeSetting.siteFooterFields,b=n.wpTehnotableThemeSetting.cartModalFields,_=(0,P.t)(t.categories,t.wpmlLang),f=n.wpTehnotableThemeSetting.validationErrorsFields,{errFormSuccess:h,coockieMain:E,coockieSettings:k}=n.wpTehnotableThemeSetting.thanksModalFields,{contactsPhones:v,contactsEmail:T,contactsScheduleTime:F,youtubeLink:C,facebookLink:Z,instagramLink:A,footerLabels:I}=n.wpTehnotableThemeSetting.siteFooterFields,{beforeButtonsText:q,afterButtonsText:M,facebookButton:j,googleButton:O}=n.wpTehnotableThemeSetting.loginWithSocialFields,{backgroundImage:z,loginForm:D,resetPasswordLink:K,createAccountLink:H}=n.wpPage.loginPageFields;return o.createElement(w.Z,{prefix:t.prefix},o.createElement(x.Z,{code:t.wpmlLang},o.createElement(r.Z,{menu:u,header:d,footer:p,cart:b,contactsPhones:v,contactsEmail:T,contactsScheduleTime:F,youtubeLink:C,facebookLink:Z,instagramLink:A,categoryList:_,footerLabels:I},o.createElement(i.Z,{title:c,description:m,lang:t.lang}),o.createElement(l.q,null,o.createElement("link",{rel:"preload",href:z.localFile.childImageSharp.gatsbyImageData.images.sources[0].srcSet.split(" ")[0],as:"image"})),o.createElement(s.Z,{className:"login-breadcrumbs",list:g}),o.createElement(y,{backgroundImage:z,loginForm:D,resetPasswordLink:K,beforeButtonsText:q,afterButtonsText:M,facebookButton:j,googleButton:O,createAccountLink:H,validateErrors:f})),o.createElement(S.Z,{desc:h.mainText,btn:h.btnText}),o.createElement(B.Z,{title:E.title,desc:E.desc,btnSettings:E.btnSettings,btnAccept:E.btnAccept}),o.createElement(L.Z,{title:k.title,subtitle:k.subtitle,required:k.required,analitics:k.analithics,personalization:k.personalization,advertisment:k.advertisment,btnAccept:k.acceptBtn,btnAcceptAll:k.acceptAllBtn})))}}}]);
//# sourceMappingURL=component---src-templates-login-js-64463dcbb7a1c71ad1a9.js.map