{"version":3,"file":"component---src-templates-history-js-442d5c8f7fae4915fbd8.js","mappings":"wQAwUA,UAvTgBA,IAA4B,IAA3B,YAAEC,EAAW,KAAEC,GAAMF,EAKpC,IAJAG,EAAAA,EAAAA,YAAU,OACLC,EAAAA,EAAAA,GAAU,aAAcC,EAAAA,EAAAA,UAAYJ,EAAYK,OAAM,WACxD,MAEIF,EAAAA,EAAAA,GAAU,WAAY,OAAO,KAGpC,MAAM,MAAEG,EAAK,SAAEC,EAAQ,YAAEC,GAAgBP,EAAKQ,OAAOC,IAG/CC,EAAOV,EAAKW,yBAAyBC,eACrCC,EAASb,EAAKW,yBAAyBG,iBACvCC,EAASf,EAAKW,yBAAyBK,iBACvCC,EAAOjB,EAAKW,yBAAyBO,gBACrCC,GAAeC,EAAAA,EAAAA,GAAqBrB,EAAYsB,WAAYtB,EAAYuB,WACxE,YACJC,EAAW,gBACXC,GACExB,EAAKW,yBAAyBc,mBAE5B,eACJC,EAAc,cACdC,EAAa,qBACbC,EAAoB,YACpBC,EAAW,aACXC,EAAY,cACZC,EAAa,aACbC,GACEhC,EAAKW,yBAAyBK,iBAG5BiB,EAAWC,KAAKC,OAAMjC,EAAAA,EAAAA,GAAU,cAChCkC,EAAYpC,EAAKqC,cAAcC,MAAMC,QAAOC,GAAQA,EAAKC,KAAKC,aAAeC,UAASzC,EAAAA,EAAAA,GAAU,cAAa,GAAGuC,KAAKG,OAAOC,MAE5HC,EAAY9C,EAAKQ,OAAOH,OAExB,WACJ0C,EAAU,eACVC,EAAc,mBACdC,EAAkB,kBAClBC,EAAiB,mBACjBC,EAAkB,kBAClBC,GACEpD,EAAKQ,OAAO6C,kBAEhB,OACEC,EAAAA,cAACC,EAAAA,EAAc,CAACnD,OAAQL,EAAYK,QAClCkD,EAAAA,cAACE,EAAAA,EAAgB,CAACC,KAAM1D,EAAYuB,UAClCgC,EAAAA,cAACI,EAAAA,EAAM,CACLhD,KAAMA,EACNG,OAAQA,EACRE,OAAQA,EACRE,KAAMA,EACNS,eAAgBA,EAChBC,cAAeA,EACfC,qBAAsBA,EACtBC,YAAaA,EACbC,aAAcA,EACdC,cAAeA,EACfZ,aAAcA,EACda,aAAcA,GAEdsB,EAAAA,cAACK,EAAAA,EAAG,CAACtD,MAAOA,EAAOuD,YAAatD,EAAUuD,KAAM9D,EAAY8D,OAC5DP,EAAAA,cAACQ,EAAAA,EAAW,CAACC,UAAU,sBAAsBC,KAAMzD,IACnD+C,EAAAA,cAACW,EAAAA,EAAY,CACXC,QAAS,UACTjC,SAAUA,EACVa,UAAWA,EACXC,WAAYA,EACZC,eAAgBA,EAChBC,mBAAoBA,EACpBC,kBAAmBA,EACnBC,mBAAoBA,EACpBC,kBAAmBA,EACnBhB,UAAWA,IAEbkB,EAAAA,cAACa,EAAAA,EAAgB,CACf9D,MAAOkB,EAAYlB,MACnB+D,KAAM7C,EAAY6C,KAClBC,YAAa9C,EAAY8C,YACzBC,UAAW/C,EAAY+C,YAEzBhB,EAAAA,cAACiB,EAAAA,EAAoB,CACnBlE,MAAOmB,EAAgBnB,MACvBmE,SAAUhD,EAAgBgD,SAC1BC,SAAUjD,EAAgBiD,SAC1BC,UAAWlD,EAAgBmD,WAC3BC,gBAAiBpD,EAAgBoD,gBACjCC,aAAcrD,EAAgBqD,aAC9BP,UAAW9C,EAAgBsD,UAC3BC,aAAcvD,EAAgBwD","sources":["webpack://gatsby-starter-default/./src/templates/History.js"],"sourcesContent":["import React, { useEffect }  from 'react'\nimport { graphql, navigate } from 'gatsby'\n\nimport Layout from '../components/Layout/Layout'\nimport Seo from '../components/seo'\nimport Breadcrumbs from '../components/Breadcrumbs/Breadcrumbs'\n\nimport AccountIntro from '../components/Account/Intro/Intro'\nimport ModalCoockieMain from '../components/ModalCoockie/ModalCoockieMain'\nimport ModalCoockieSettings from '../components/ModalCoockie/ModalCoockieSettings'\n\nimport PrefixProvider from '../context/PrefixProvider'\nimport LangCodeProvider from '../context/LangCodeProvider'\n\nimport { getCurrentCategories } from '../utils/getCurrentCategories'\nimport { getCookie } from '../utils/getCookie'\n\nconst History = ({ pageContext, data }) => {\n  useEffect(() => {\n    !!!getCookie('user_id') && navigate(`${pageContext.prefix}login`)\n  }, [])\n\n  if (!!!getCookie('user_id')) return null\n\n  // Meta Data \n  const { title, metaDesc, breadcrumbs } = data.wpPage.seo\n  \n  // Common blocks\n  const menu = data.wpTehnotableThemeSetting.mainMenuFields\n  const header = data.wpTehnotableThemeSetting.siteHeaderFields\n  const footer = data.wpTehnotableThemeSetting.siteFooterFields\n  const cart = data.wpTehnotableThemeSetting.cartModalFields\n  const categoryList = getCurrentCategories(pageContext.categories, pageContext.wpmlLang)\n  const { \n    coockieMain,\n    coockieSettings\n  } = data.wpTehnotableThemeSetting.thanksModalFields\n  \n  const {\n    contactsPhones,\n    contactsEmail,\n    contactsScheduleTime,\n    youtubeLink,\n    facebookLink,\n    instagramLink,\n    footerLabels\n  } = data.wpTehnotableThemeSetting.siteFooterFields\n\n  // Page blocks\n  const userInfo = JSON.parse(getCookie('user_info'))\n  const orderList = data.allWpCustomer.edges.filter(item => item.node.databaseId === parseInt(getCookie('user_id')))[0].node.orders.nodes\n  \n  const pageTitle = data.wpPage.title\n  \n  const { \n    logoutText,\n    emptyListTitle,\n    orderHistoryFields,\n    orderHistoryTitle,\n    personalInfoFields,\n    personalInfoTitle\n  } = data.wpPage.profilePageFields\n\n  return (\n    <PrefixProvider prefix={pageContext.prefix}>\n      <LangCodeProvider code={pageContext.wpmlLang}>\n        <Layout\n          menu={menu}\n          header={header}\n          footer={footer}\n          cart={cart}\n          contactsPhones={contactsPhones}\n          contactsEmail={contactsEmail}\n          contactsScheduleTime={contactsScheduleTime}\n          youtubeLink={youtubeLink}\n          facebookLink={facebookLink}\n          instagramLink={instagramLink}\n          categoryList={categoryList}\n          footerLabels={footerLabels}\n        >\n          <Seo title={title} description={metaDesc} lang={pageContext.lang} />\n          <Breadcrumbs className=\"account-breadcrumbs\" list={breadcrumbs} />\n          <AccountIntro \n            tabName={'history'} \n            userInfo={userInfo}\n            pageTitle={pageTitle}\n            logoutText={logoutText}\n            emptyListTitle={emptyListTitle}\n            orderHistoryFields={orderHistoryFields}\n            orderHistoryTitle={orderHistoryTitle}\n            personalInfoFields={personalInfoFields}\n            personalInfoTitle={personalInfoTitle}\n            orderList={orderList}\n          />\n          <ModalCoockieMain\n            title={coockieMain.title}\n            desc={coockieMain.desc}\n            btnSettings={coockieMain.btnSettings}\n            btnAccept={coockieMain.btnAccept}\n          />\n          <ModalCoockieSettings\n            title={coockieSettings.title}\n            subtitle={coockieSettings.subtitle}\n            required={coockieSettings.required}\n            analitics={coockieSettings.analithics}\n            personalization={coockieSettings.personalization}\n            advertisment={coockieSettings.advertisment}\n            btnAccept={coockieSettings.acceptBtn}\n            btnAcceptAll={coockieSettings.acceptAllBtn}\n          />\n        </Layout>\n      </LangCodeProvider>\n    </PrefixProvider>\n  )\n}\n\nexport const query = graphql`\n  query getHistory($lang: String) {\n    allWpCustomer {\n      edges {\n        node {\n          databaseId\n          orders {\n            nodes {\n              databaseId\n              date(formatString: \"DD.MM.yyy\")\n              status\n              total\n              orderNumber\n              lineItems {\n                nodes {\n                  product {\n                    node {\n                      databaseId\n                      image {\n                        sourceUrl\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    wpPage(locale: {locale: {eq: $lang}}, slug: {eq: \"profile\"}) {\n      title\n      seo {\n        title\n        metaDesc\n        breadcrumbs {\n          text\n          url\n        }\n      }\n      profilePageFields {\n        personalInfoTitle\n        personalInfoFields {\n          birthdayText\n          editText\n          emailText\n          firstNameText\n          lastNameText\n          middleNameText\n          passwordText\n          phoneText\n          saveText\n        }\n        orderHistoryTitle\n        orderHistoryFields {\n          amountOrderText\n          orderDateText\n          orderText\n          reorderText\n        }\n        logoutText\n        emptyListTitle\n      }\n    }\n    wpTehnotableThemeSetting(locale: {locale: {eq: $lang}}) {\n      thanksModalFields {\n        coockieMain {\n          title\n          desc\n          btnSettings\n          btnAccept\n        }\n        coockieSettings {\n          title\n          subtitle\n          required {\n            requiredTitle\n            requiredDesc\n          }\n          analithics {\n            analithicsTitle\n            analithicsDesc\n          }\n          personalization {\n            personalizationTitle\n            personalizationDesc\n          }\n          advertisment {\n            advertismentTitle\n            advertismentDesc\n          }\n          acceptBtn\n          acceptAllBtn\n        }\n      }\n      mainMenuFields {\n        mobileMenuControls {\n          close\n          back\n        }\n        mainMenu {\n          itemName\n          itemSlug\n          submenu {\n            submenuName\n            submenuSlug\n            submenuImg {\n              localFile {\n                childImageSharp {\n                  gatsbyImageData(\n                    width: 315\n                    quality: 95\n                    placeholder: BLURRED\n                    height: 315\n                    formats: [AUTO, WEBP, AVIF]\n                  )\n                }\n              }\n            }\n          }\n        }\n      }\n      cartModalFields {\n        addToCartButton\n        cartTitle\n        cartErrTitle\n        deleteProductFromCart\n        totalPrice\n        checkoutButton {\n          title\n        }\n        catalogButton {\n          title\n        }\n        additionalInfo {\n          text\n        }\n      }\n      siteHeaderFields {\n        headerAuth {\n          personalInfo\n          orderHistory\n          logout\n        }\n        infoSlider {\n          text\n        }\n        contactPhones {\n          number\n        }\n        headerSocialList {\n          facebookLink\n          telegramLink\n          whatsappLink\n        }\n        headerLogo {\n          sourceUrl\n        }\n        searchInputPlaceholder\n        headerButtonClose\n        headerButtonSearch\n      }\n      siteFooterFields {\n        footerLabels {\n          phoneTitle\n          emailTitle\n          scheduleTitle\n          subscribeTitle\n        }\n        footerLogo {\n          sourceUrl\n        }\n        youtubeLink\n        instagramLink\n        facebookLink\n        firstColumn {\n          menuList {\n            itemLink\n            itemName\n          }\n          menuTitle\n        }\n        secondColumn {\n          menuTitle\n          menuList {\n            itemLink\n            itemName\n          }\n        }\n        thirdColumn {\n          menuTitle\n          menuList {\n            itemLink\n            itemName\n          }\n        }\n        contactsBlockTitle\n        contactsScheduleTime\n        contactsPhones {\n          number\n        }\n        contactsEmail\n        bottomLinks {\n          itemTitle\n          itemLink\n        }\n        footerCopyrightText\n      }\n    }\n  }\n`\n\nexport default History"],"names":["_ref","pageContext","data","useEffect","getCookie","navigate","prefix","title","metaDesc","breadcrumbs","wpPage","seo","menu","wpTehnotableThemeSetting","mainMenuFields","header","siteHeaderFields","footer","siteFooterFields","cart","cartModalFields","categoryList","getCurrentCategories","categories","wpmlLang","coockieMain","coockieSettings","thanksModalFields","contactsPhones","contactsEmail","contactsScheduleTime","youtubeLink","facebookLink","instagramLink","footerLabels","userInfo","JSON","parse","orderList","allWpCustomer","edges","filter","item","node","databaseId","parseInt","orders","nodes","pageTitle","logoutText","emptyListTitle","orderHistoryFields","orderHistoryTitle","personalInfoFields","personalInfoTitle","profilePageFields","React","PrefixProvider","LangCodeProvider","code","Layout","Seo","description","lang","Breadcrumbs","className","list","AccountIntro","tabName","ModalCoockieMain","desc","btnSettings","btnAccept","ModalCoockieSettings","subtitle","required","analitics","analithics","personalization","advertisment","acceptBtn","btnAcceptAll","acceptAllBtn"],"sourceRoot":""}